import{A as k,B as M,C as Je,D as Fe,E as $e,F as E,G as v,H as T,I as O,a as we,b as ke,c as Me,d as xe,e as ve,f as Se,g as Pe,h as Ee,i as Oe,j as Ie,k as Le,l as je,m as Ge,n as Te,o as Ne,p as Ae,q as De,r as Ve,s as He,t as x,u as _,v as I,w as L,x as ze,y as j,z as G}from"./chunk-FMYCLX6G.js";import"./chunk-5XMFJ3F2.js";import"./chunk-XDJGQ7GY.js";import{$ as oe,A as U,B,C as W,J as K,N as Y,R as Q,W as X,X as Z,Z as ee,_ as te,aa as re,ba as ae,ca as ne,d as S,da as ie,e as C,ea as se,f as R,fa as le,g as A,ga as ce,h as i,ha as de,i as D,j as b,ja as ue,k as l,l as a,la as me,m as n,ma as pe,n as c,na as ge,o as P,p as g,q as f,qa as he,r as V,s as d,sa as fe,t as H,ta as _e,u as w,v as z,va as be,w as J,x as F,xa as ye,y as $,ya as Ce,z as q,za as Re}from"./chunk-FO6YZXNC.js";import"./chunk-YI27JXCD.js";import"./chunk-XVN6GXSZ.js";import"./chunk-P7WOO5OP.js";import"./chunk-UZEY6XXM.js";import"./chunk-SDMJJ4FY.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-PIQNUW7X.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{g as h}from"./chunk-2R6CW7ES.js";var qe=()=>["OK"];function Ue(s,m){s&1&&c(0,"ion-spinner")}function Be(s,m){s&1&&c(0,"ion-icon",34)}function We(s,m){if(s&1){let u=P();a(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),d(3,"JSON de la Ruta"),n(),a(4,"ion-button",35),g("click",function(){C(u);let t=f();return R(t.toggleJsonPreview())}),c(5,"ion-icon",36),n()(),a(6,"ion-card-content"),c(7,"ion-textarea",37),n()()}if(s&2){let u=f();i(7),l("value",u.getRutaFormateada(u.rutaCompleta))}}function Ke(s,m){s&1&&(a(0,"div",38),c(1,"ion-spinner"),a(2,"p"),d(3,"Cargando mapa..."),n()())}function Ye(s,m){s&1&&c(0,"ion-spinner")}function Qe(s,m){s&1&&c(0,"ion-icon",47)}function Xe(s,m){if(s&1){let u=P();a(0,"ion-item")(1,"ion-label")(2,"h3"),d(3),n()(),a(4,"div",49)(5,"ion-button",50),g("click",function(){let t=C(u).$implicit,o=f(3);return R(o.centrarEnRuta(t))}),c(6,"ion-icon",51),n(),a(7,"ion-button",52),c(8,"ion-icon",32),n()()()}if(s&2){let u=m.$implicit;i(3),H(u.nombre_ruta)}}function Ze(s,m){if(s&1&&(a(0,"div")(1,"ion-list"),b(2,Xe,9,1,"ion-item",48),n()()),s&2){let u=f(2);i(2),l("ngForOf",u.rutasGuardadas)}}function et(s,m){s&1&&(a(0,"p"),d(1,"Crea una ruta y gu\xE1rdala para verla aqu\xED"),n())}function tt(s,m){if(s&1&&(a(0,"ion-item")(1,"ion-label",53)(2,"p"),d(3,"No hay rutas guardadas en el servidor"),n(),b(4,et,2,0,"p",17),n()()),s&2){let u=f(2);i(4),l("ngIf",!u.cargandoRutas)}}function ot(s,m){if(s&1){let u=P();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Rutas Guardadas"),n(),a(4,"ion-buttons",39)(5,"ion-button",40),g("click",function(){C(u);let t=f();return R(t.cerrarModalRutas())}),c(6,"ion-icon",36),n()()()(),a(7,"ion-content",41)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),d(11,"\u{1F504} Rutas Guardadas en Servidor"),n()(),a(12,"ion-card-content")(13,"div",42)(14,"ion-button",43),g("click",function(){C(u);let t=f();return R(t.cargarRutasGuardadas())}),b(15,Ye,1,0,"ion-spinner",17)(16,Qe,1,0,"ion-icon",44),d(17),n(),a(18,"ion-button",13),g("click",function(){C(u);let t=f();return R(t.toggleRutasGuardadas())}),c(19,"ion-icon",14),d(20),n()(),b(21,Ze,3,1,"div",45)(22,tt,5,1,"ng-template",null,0,q),n()(),a(24,"ion-button",46),g("click",function(){C(u);let t=f();return R(t.cerrarModalRutas())}),d(25," Cerrar "),n()()}if(s&2){let u=V(23),e=f();i(14),l("disabled",e.cargandoRutas),i(),l("ngIf",e.cargandoRutas),i(),l("ngIf",!e.cargandoRutas),i(),w(" ",e.cargandoRutas?"Cargando...":"Actualizar"," "),i(),l("color",e.rutasVisibles?"warning":"success"),i(),l("name",e.rutasVisibles?"eye-off":"eye"),i(),w(" ",e.rutasVisibles?"Ocultar Rutas":"Mostrar Rutas"," "),i(),l("ngIf",e.rutasGuardadas.length>0)("ngIfElse",u)}}var Ot=(()=>{let m=class m{constructor(){this.datos=S(He),this.alertController=S(be),this.modalRutasAbierto=!1,this.calleGuardada="",this.data=[],this.currentLocation=null,this.isLoading=!0,this.guardandoRuta=!1,this.cargandoRutas=!1,this.isDarkMode=!1,this.rutasVisibles=!0,this.modoRecorrido=!1,this.puntosRecorrido=[],this.siguienteId=1,this.showAlert=!1,this.alertMessage="",this.nombreRuta="ruta casa",this.perfilId="75fb749d-1bbc-4b4c-9b65-eedc5204afa5",this.rutaCompleta=null,this.showJsonPreview=!1,this.JSON=JSON,this.rutasGuardadas=[],this.document=S(A),we({location:Ie,document:ve,download:Se,copy:xe,trash:De,notifications:je,add:ke,play:Ge,stop:Ne,close:Me,refresh:Te,wifi:Ve,sunny:Ae,moon:Le,locate:Oe,eyeOff:Ee,eye:Pe})}ngOnInit(){return h(this,null,function*(){yield this.loadMap(),this.cargarRecorridoGuardado(),this.actualizarRutaCompleta(),this.cargarRutasGuardadas(),this.initializeDarkMode()})}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,this.applyDarkMode(),this.saveDarkModePreference()}applyDarkMode(){this.isDarkMode?this.document.body.classList.add("dark"):this.document.body.classList.remove("dark")}saveDarkModePreference(){localStorage.setItem("darkMode",this.isDarkMode.toString())}initializeDarkMode(){let e=localStorage.getItem("darkMode");e&&(this.isDarkMode=e==="true",this.applyDarkMode())}cerrarModalRutas(){this.modalRutasAbierto=!1}loadMap(){return h(this,null,function*(){this.isLoading=!0;try{if((yield x.checkPermissions()).location!=="granted"&&(yield x.requestPermissions()).location!=="granted")throw new Error("Permisos de ubicaci\xF3n denegados");let t=yield x.getCurrentPosition({enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4}),o=t.coords.latitude,r=t.coords.longitude;if(console.log("\u{1F4CD} Ubicaci\xF3n REAL obtenida:",{lat:o,lng:r}),this.currentLocation={lat:o,lng:r},o<-90||o>90||r<-180||r>180)throw new Error("Coordenadas inv\xE1lidas obtenidas");this.initializeMap(r,o)}catch(e){console.error("\u274C Error obteniendo ubicaci\xF3n:",e),console.log("\u{1F5FA}\uFE0F Usando ubicaci\xF3n por defecto: Buenaventura"),this.initializeMap(-77.0797,3.8836)}finally{this.isLoading=!1}})}initializeMap(e,t){this.map&&this.map.setTarget(void 0),console.log("\u{1F5FA}\uFE0F Inicializando mapa en:",{lng:e,lat:t}),this.map=new Je({target:"mapId",layers:[new Fe({source:new $e})],view:new ze({center:_([e,t]),zoom:15})}),this.markerLayer=new E({source:new O}),this.routeLayer=new E({source:new O,style:new M({stroke:new k({color:"#ff0000",width:4})})}),this.rutasLayer=new E({source:new O,style:new M({stroke:new k({color:"#3880ff",width:3,lineDash:[5,5]})})}),this.map.addLayer(this.markerLayer),this.map.addLayer(this.routeLayer),this.map.addLayer(this.rutasLayer),this.addLocationMarker(e,t),this.map.on("click",o=>h(this,null,function*(){this.modoRecorrido?yield this.agregarPuntoRecorrido(o.coordinate):yield this.obtenerYGuardarCalle(o.coordinate)})),this.dibujarRecorrido()}toggleModoRecorrido(){this.modoRecorrido=!this.modoRecorrido,this.mostrarMensaje(this.modoRecorrido?"Modo recorrido ACTIVADO - Haz clic en el mapa para agregar puntos":"Modo recorrido DESACTIVADO")}agregarPuntoRecorrido(e){return h(this,null,function*(){try{let t=I(e),[o,r]=t,p=yield this.obtenerNombreCalle(r,o),y={id:this.siguienteId++,lat:r,lng:o,calle:p,timestamp:new Date,orden:this.puntosRecorrido.length+1};this.puntosRecorrido.push(y),this.guardarRecorrido(),this.dibujarPuntoRecorrido(y),this.dibujarRecorrido(),this.actualizarRutaCompleta(),this.mostrarMensaje(`Punto ${y.orden} agregado: ${p}`)}catch(t){console.error("Error agregando punto:",t),this.mostrarMensaje("Error al agregar punto")}})}dibujarPuntoRecorrido(e){if(!this.markerLayer)return;let t=new v({geometry:new L(_([e.lng,e.lat]))});t.setStyle(new M({image:new j({radius:6,fill:new G({color:"#ff0000"}),stroke:new k({color:"white",width:2})})})),this.markerLayer.getSource().addFeature(t)}dibujarRecorrido(){if(!this.routeLayer||this.puntosRecorrido.length<2)return;let e=this.puntosRecorrido.sort((r,p)=>r.orden-p.orden).map(r=>_([r.lng,r.lat])),t=new T(e),o=new v({geometry:t});this.routeLayer.getSource().clear(),this.routeLayer.getSource().addFeature(o)}eliminarRecorrido(){this.puntosRecorrido=[],this.siguienteId=1,this.guardarRecorrido(),this.actualizarRutaCompleta(),this.routeLayer&&this.routeLayer.getSource().clear(),this.markerLayer&&this.markerLayer.getSource().clear(),this.currentLocation&&this.addLocationMarker(this.currentLocation.lng,this.currentLocation.lat),this.mostrarMensaje("Recorrido eliminado")}abrirModalRutas(){this.modalRutasAbierto=!0,this.cargarRutasGuardadas()}toggleRutasGuardadas(){this.rutasVisibles=!this.rutasVisibles,this.rutasVisibles?(this.dibujarRutasGuardadas(),this.mostrarMensaje("Rutas mostradas en el mapa")):(this.limpiarRutasGuardadas(),this.mostrarMensaje("Rutas ocultadas del mapa"))}dibujarRutasGuardadas(){if(!this.rutasLayer||!this.rutasGuardadas.length){console.log("\u274C No se pueden dibujar rutas - verificar capa y datos");return}this.limpiarRutasGuardadas(),console.log(`\u{1F3A8} Dibujando ${this.rutasGuardadas.length} rutas organizadamente...`),this.rutasGuardadas.forEach((e,t)=>{this.dibujarRutaOrganizada(e,t)}),console.log("\u2705 Todas las rutas dibujadas organizadamente"),this.mostrarMensaje(`${this.rutasGuardadas.length} rutas mostradas en el mapa`)}dibujarRutaOrganizada(e,t){try{let o=JSON.parse(e.shape),r=this.obtenerEstiloOrganizado(t);console.log(`\u{1F504} Dibujando ruta ${t+1}: "${e.nombre_ruta}" - Color: ${r.color}`),o.type==="LineString"&&o.coordinates?this.dibujarSegmento(o.coordinates,e.nombre_ruta,r):o.type==="MultiLineString"&&o.coordinates&&o.coordinates.forEach((p,y)=>{this.dibujarSegmento(p,`${e.nombre_ruta}`,r)})}catch(o){console.error("\u274C Error dibujando ruta organizada:",o)}}dibujarSegmento(e,t,o){if(!e||e.length<2){console.log("\u274C Coordenadas insuficientes para dibujar segmento");return}let r=e.map(N=>N.length===2?_(N):_([0,0])),p=new T(r),y=new v({geometry:p,name:t});y.setStyle(new M({stroke:new k({color:o.color,width:o.ancho})})),this.rutasLayer.getSource().addFeature(y)}obtenerEstiloOrganizado(e){let t=["#3880ff","#10dc60","#ffce00","#f04141","#7044ff","#0cd1e8","#ff6b00","#6a1b9a","#004d40","#bf360c"],o=["#4c8dff","#2dd36f","#ffd534","#ff6b6b","#8c7bff","#34e7e7","#ff8c42","#8e24aa","#00796b","#e64a19"],r=e<10?t:o,p=e%r.length;return{color:r[p],ancho:4}}limpiarRutasGuardadas(){this.rutasLayer&&this.rutasLayer.getSource().clear()}centrarEnRuta(e){try{let t=JSON.parse(e.shape);if(t.type==="LineString"&&t.coordinates.length>0){let[o,r]=t.coordinates[0];this.map?.getView().animate({center:_([o,r]),zoom:15,duration:1e3}),this.mostrarMensaje(`Centrado en ruta: ${e.nombre_ruta}`)}}catch(t){console.error("Error centrando en ruta:",t)}}obtenerNumeroPuntos(e){try{let t=JSON.parse(e.shape);return t.type==="LineString"&&t.coordinates?t.coordinates.length:0}catch{return 0}}actualizarRutaCompleta(){if(this.puntosRecorrido.length<2){this.rutaCompleta=null;return}let e={type:"LineString",coordinates:this.puntosRecorrido.sort((t,o)=>t.orden-o.orden).map(t=>[t.lng,t.lat])};this.rutaCompleta={nombre_ruta:this.nombreRuta,perfil_id:this.perfilId,shape:JSON.stringify(e)},console.log("\u{1F504} Ruta actualizada:",this.rutaCompleta)}getShapePreview(){if(!this.rutaCompleta)return"No hay ruta generada";try{return`LineString con ${JSON.parse(this.rutaCompleta.shape).coordinates.length} puntos`}catch{return"Error al parsear shape"}}cargarRutasGuardadas(){return h(this,null,function*(){this.cargandoRutas=!0,console.log("\u{1F504} Iniciando carga de rutas...");try{if(this.rutasGuardadas=yield this.datos.obtenerRutas(),console.log("\u{1F4E6} Rutas recibidas del servidor:",this.rutasGuardadas),!this.rutasGuardadas||this.rutasGuardadas.length===0){console.log("\u2139\uFE0F No hay rutas guardadas en el servidor"),this.mostrarMensaje("No hay rutas guardadas en el servidor");return}let e=this.rutasGuardadas.filter(t=>t&&t.shape&&t.nombre_ruta);if(console.log(`\u2705 ${e.length} rutas v\xE1lidas de ${this.rutasGuardadas.length} totales`),e.length===0){console.log("\u274C No hay rutas v\xE1lidas para mostrar"),this.mostrarMensaje("Las rutas no tienen formato v\xE1lido");return}this.dibujarRutasGuardadas(),console.log("\u{1F389} Rutas cargadas y dibujadas exitosamente")}catch(e){console.error("\u{1F4A5} ERROR en cargarRutasGuardadas:",e);let t="Error desconocido al cargar rutas";e.status===0?t="No se pudo conectar al servidor":e.status===404?t="Servidor no encontrado":e.message&&(t=e.message),this.mostrarAlerta("Error",t)}finally{this.cargandoRutas=!1}})}guardarRuta(){return h(this,null,function*(){if(!this.rutaCompleta){this.mostrarAlerta("Error","No hay ruta para guardar. Agrega al menos 2 puntos al recorrido.");return}if(!this.validarGeoJSON(this.rutaCompleta.shape)){this.mostrarAlerta("Error","El formato de la ruta no es v\xE1lido");return}this.guardandoRuta=!0;try{console.log("\u{1F4BE} Intentando guardar ruta:",this.rutaCompleta);let e=yield this.datos.guardarRuta(this.rutaCompleta);console.log("\u2705 Ruta guardada exitosamente:",e),yield this.cargarRutasGuardadas(),this.mostrarAlerta("\xC9xito",`Ruta "${this.nombreRuta}" guardada correctamente en el servidor`)}catch(e){console.error("\u274C Error detallado al guardar:",e);let t="Error desconocido al guardar la ruta";e.status===0?t="No se pudo conectar al servidor. Verifica tu conexi\xF3n.":e.status===400?t="Datos inv\xE1lidos enviados al servidor":e.status===404?t="Servidor no encontrado (404)":e.status===500?t="Error interno del servidor (500)":e.message&&(t=e.message),yield this.mostrarAlerta("Error al Guardar",t)}finally{this.guardandoRuta=!1}})}validarGeoJSON(e){try{let t=JSON.parse(e);return t.type==="LineString"&&Array.isArray(t.coordinates)&&t.coordinates.length>=2}catch{return!1}}eliminarRuta(e,t){return h(this,null,function*(){try{yield(yield this.alertController.create({header:"Confirmar Eliminaci\xF3n",message:`\xBFEst\xE1s seguro de que quieres eliminar la ruta "${t}"?`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",handler:()=>h(this,null,function*(){try{yield this.datos.eliminarRuta(e),this.mostrarMensaje("Ruta eliminada correctamente"),yield this.cargarRutasGuardadas()}catch(r){console.error("Error eliminando ruta:",r),this.mostrarAlerta("Error","No se pudo eliminar la ruta")}})}]})).present()}catch(o){console.error("Error al preparar eliminaci\xF3n:",o)}})}probarConexionServidor(){return h(this,null,function*(){try{this.mostrarAlerta("Probando Conexi\xF3n","Verificando conexi\xF3n con el servidor...");let e=yield this.datos.obtenerRutas();e.length>0?this.mostrarAlerta("Conexi\xF3n Exitosa",`Se encontraron ${e.length} rutas en el servidor. Conexi\xF3n funcionando correctamente.`):this.mostrarAlerta("Conexi\xF3n Exitosa","Conexi\xF3n al servidor exitosa. No hay rutas guardadas a\xFAn.")}catch(e){console.error("Error de conexi\xF3n:",e),this.mostrarAlerta("Error de Conexi\xF3n","No se pudo conectar al servidor. Verifica la URL y que el servidor est\xE9 funcionando.")}})}getRutaFormateada(e){try{let t=JSON.parse(e.shape);return JSON.stringify({perfil_id:e.perfil_id,nombre_ruta:e.nombre_ruta,shape:t},null,2)}catch{return JSON.stringify(e,null,2)}}toggleJsonPreview(){this.showJsonPreview=!this.showJsonPreview}obtenerNombreCalle(e,t){return h(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&addressdetails=1`)).json();return r&&r.address?this.crearStringCalle(r.address):"Calle no identificada"}catch(o){return console.error("Error obteniendo nombre de calle:",o),"Calle no identificada"}})}guardarRecorrido(){localStorage.setItem("recorridoGuardado",JSON.stringify({puntos:this.puntosRecorrido,siguienteId:this.siguienteId}))}cargarRecorridoGuardado(){try{let e=localStorage.getItem("recorridoGuardado");if(e){let t=JSON.parse(e);this.puntosRecorrido=t.puntos||[],this.siguienteId=t.siguienteId||1,this.puntosRecorrido.length>0&&setTimeout(()=>{this.dibujarRecorrido(),this.puntosRecorrido.forEach(o=>this.dibujarPuntoRecorrido(o)),this.actualizarRutaCompleta()},1e3)}}catch(e){console.error("Error cargando recorrido guardado:",e)}}mostrarMensaje(e){this.alertMessage=e,this.showAlert=!0,setTimeout(()=>this.showAlert=!1,3e3)}addLocationMarker(e,t){if(!(!this.map||!this.markerLayer)&&(!this.modoRecorrido||this.puntosRecorrido.length===0)){let o=new v({geometry:new L(_([e,t]))});o.setStyle(new M({image:new j({radius:8,fill:new G({color:"#3880ff"}),stroke:new k({color:"white",width:2})})})),this.markerLayer.getSource().addFeature(o)}}obtenerYGuardarCalle(e){return h(this,null,function*(){try{let t=I(e),[o,r]=t,p=yield this.obtenerNombreCalle(r,o);this.guardarCalle(p,e)}catch(t){console.error("Error:",t)}})}crearStringCalle(e){let t=[e.road,e.street,e.pedestrian,e.footway].filter(r=>r&&r.match(/\d+/));if(t.length>0)return`Calle ${t[0].match(/(\d+)/)[1]}`;let o=e.road||e.street||e.pedestrian;if(o){let r=o.match(/(\d+)/);return r?`Calle ${r[1]}`:`Calle ${o}`}return"Calle no identificada"}guardarCalle(e,t){this.calleGuardada=e,localStorage.setItem("ultimaCalleCapturada",e),console.log("Calle guardada:",e),this.mostrarCalleGuardada(e,t)}mostrarCalleGuardada(e,t){this.mostrarMensaje(`Calle guardada: ${e}`)}buscar(){return h(this,null,function*(){if(!this.calleGuardada){console.log("No hay calle guardada para buscar");return}console.log("Buscando calle:",this.calleGuardada);let e=yield this.datos.buscarCallePorNombre(this.calleGuardada);console.log("Resultados de b\xFAsqueda:",e)})}centrarEnUbicacionActual(){return h(this,null,function*(){try{let e=yield x.getCurrentPosition({enableHighAccuracy:!0}),t=e.coords.latitude,o=e.coords.longitude;this.map?.getView().animate({center:_([o,t]),zoom:15,duration:1e3}),this.addLocationMarker(o,t),this.mostrarMensaje("Mapa centrado en tu ubicaci\xF3n actual")}catch(e){console.error("Error centrando en ubicaci\xF3n actual:",e),this.mostrarMensaje("Error al obtener la ubicaci\xF3n actual")}})}mostrarAlerta(e,t){return h(this,null,function*(){yield(yield this.alertController.create({header:e,message:t,buttons:["OK"]})).present()})}};m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=D({type:m,selectors:[["app-home-conductor"]],decls:55,vars:22,consts:[["sinRutas",""],[3,"translucent"],[3,"fullscreen"],["id","mapId",2,"height","50vh","width","100%"],[3,"didDismiss","isOpen","message","buttons"],[1,"config-rutas"],["position","stacked"],["placeholder","Ej: Ruta Casa-Trabajo",3,"ngModelChange","ionInput","ngModel"],[1,"header-ges"],["color","success","fill","clear",1,"find",3,"click"],["slot","icon-only","name","location",1,"find-icon"],[3,"color"],[2,"display","flex","flex-direction","column","gap","10px","margin-top","15px"],["expand","block",3,"click","color"],["slot","start",3,"name"],[2,"display","flex","gap","10px"],["expand","block","color","primary",3,"click","disabled"],[4,"ngIf"],["slot","start","name","download",4,"ngIf"],["expand","block","color","secondary",3,"click"],["slot","start","name","copy"],["expand","block","color","danger",3,"click","disabled"],["slot","start","name","trash"],["class","loading-spinner",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add"],["side","top"],["color","primary",3,"click"],["name","location"],["color","success",3,"click"],[3,"name"],["color","danger",3,"click","disabled"],["name","trash"],[3,"didDismiss","isOpen"],["slot","start","name","download"],["fill","clear",3,"click"],["slot","icon-only","name","close"],["rows","10","readonly","",2,"font-family","monospace","font-size","12px",3,"value"],[1,"loading-spinner"],["slot","end"],[3,"click"],[1,"ion-padding"],[2,"display","flex","justify-content","space-between","margin","8%"],["expand","block","color","secondary",3,"click","disabled"],["slot","start","name","refresh",4,"ngIf"],[4,"ngIf","ngIfElse"],["expand","block","color","medium",2,"margin-top","20px",3,"click"],["slot","start","name","refresh"],[4,"ngFor","ngForOf"],["slot","end",2,"display","flex","gap","5px"],["color","primary","size","small",3,"click"],["name","locate"],["color","danger","size","small"],[1,"ion-text-center"]],template:function(t,o){t&1&&(c(0,"ion-header",1),a(1,"ion-content",2),c(2,"div",3),a(3,"ion-alert",4),g("didDismiss",function(){return o.showAlert=!1}),n(),a(4,"ion-card",5)(5,"ion-card-header")(6,"ion-card-title"),d(7,"Configuraci\xF3n de Ruta"),n()(),a(8,"ion-card-content")(9,"ion-item")(10,"ion-label",6),d(11,"Nombre de la Ruta"),n(),a(12,"ion-input",7),F("ngModelChange",function(p){return J(o.nombreRuta,p)||(o.nombreRuta=p),p}),g("ionInput",function(){return o.actualizarRutaCompleta()}),n()()()(),a(13,"ion-card")(14,"ion-card-header",8)(15,"ion-card-title"),d(16,"Gesti\xF3n de creacion de rutas "),a(17,"ion-button",9),g("click",function(){return o.centrarEnUbicacionActual()}),c(18,"ion-icon",10),n()()(),a(19,"ion-card-content")(20,"ion-list")(21,"ion-item")(22,"ion-label"),d(23,"Modo Creacion de Rutas"),n(),a(24,"ion-badge",11),d(25),n()()(),a(26,"div",12)(27,"ion-button",13),g("click",function(){return o.toggleModoRecorrido()}),c(28,"ion-icon",14),d(29),n(),a(30,"div",15)(31,"ion-button",16),g("click",function(){return o.guardarRuta()}),b(32,Ue,1,0,"ion-spinner",17)(33,Be,1,0,"ion-icon",18),d(34),n(),a(35,"ion-button",19),g("click",function(){return o.abrirModalRutas()}),c(36,"ion-icon",20),d(37," Mirar rutas "),n(),a(38,"ion-button",21),g("click",function(){return o.eliminarRecorrido()}),c(39,"ion-icon",22),d(40," Eliminar "),n()()()()(),b(41,We,8,1,"ion-card",17)(42,Ke,4,0,"div",23),a(43,"ion-fab",24)(44,"ion-fab-button"),c(45,"ion-icon",25),n(),a(46,"ion-fab-list",26)(47,"ion-fab-button",27),g("click",function(){return o.centrarEnUbicacionActual()}),c(48,"ion-icon",28),n(),a(49,"ion-fab-button",29),g("click",function(){return o.toggleModoRecorrido()}),c(50,"ion-icon",30),n(),a(51,"ion-fab-button",31),g("click",function(){return o.eliminarRecorrido()}),c(52,"ion-icon",32),n()()()(),a(53,"ion-modal",33),g("didDismiss",function(){return o.cerrarModalRutas()}),b(54,ot,26,9,"ng-template"),n()),t&2&&(l("translucent",!0),i(),l("fullscreen",!0),i(2),l("isOpen",o.showAlert)("message",o.alertMessage)("buttons",$(21,qe)),i(9),z("ngModel",o.nombreRuta),i(12),l("color",o.modoRecorrido?"success":"medium"),i(),w(" ",o.modoRecorrido?"ACTIVO":"INACTIVO"," "),i(2),l("color",o.modoRecorrido?"danger":"success"),i(),l("name",o.modoRecorrido?"stop":"play"),i(),w(" ",o.modoRecorrido?"Detener creacion de rutas":"Crear Rutas"," "),i(2),l("disabled",!o.rutaCompleta||o.guardandoRuta),i(),l("ngIf",o.guardandoRuta),i(),l("ngIf",!o.guardandoRuta),i(),w(" ",o.guardandoRuta?"Guardando...":"Guardar Ruta"," "),i(4),l("disabled",o.puntosRecorrido.length===0),i(3),l("ngIf",o.showJsonPreview&&o.rutaCompleta),i(),l("ngIf",o.isLoading),i(8),l("name",o.modoRecorrido?"stop":"play"),i(),l("disabled",o.puntosRecorrido.length===0),i(2),l("isOpen",o.modalRutasAbierto))},dependencies:[de,X,oe,te,se,ue,fe,_e,re,ae,ne,ie,ge,me,pe,ee,Z,le,ce,Ce,Re,he,W,U,B,Q,K,Y,ye],styles:['@charset "UTF-8";.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center}.loading-spinner[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:10px}.find[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.find[_ngcontent-%COMP%]   .find-icon[_ngcontent-%COMP%]{font-size:24px}body.dark[_ngcontent-%COMP%]{--ion-background-color: #121212;--ion-background-color-rgb: 18, 18, 18;--ion-text-color: #ffffff;--ion-text-color-rgb: 255, 255, 255;--ion-color-step-50: #1e1e1e;--ion-color-step-100: #2a2a2a;--ion-color-step-150: #363636;--ion-color-step-200: #414141;--ion-color-step-250: #4d4d4d;--ion-color-step-300: #595959;--ion-color-step-350: #656565;--ion-color-step-400: #717171;--ion-color-step-450: #7d7d7d;--ion-color-step-500: #898989;--ion-color-step-550: #949494;--ion-color-step-600: #a0a0a0;--ion-color-step-650: #acacac;--ion-color-step-700: #b8b8b8;--ion-color-step-750: #c4c4c4;--ion-color-step-800: #d0d0d0;--ion-color-step-850: #dbdbdb;--ion-color-step-900: #e7e7e7;--ion-color-step-950: #f3f3f3;--ion-item-background: #1e1e1e;--ion-card-background: #1e1e1e;--ion-toolbar-background: #1f1f1f;--ion-tab-bar-background: #1f1f1f}body.dark[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{--background: var(--ion-card-background);box-shadow:0 4px 12px #0000004d}body.dark[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background)}body.dark[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-toolbar-background)}body.dark[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{background:var(--ion-background-color)}body.dark[_ngcontent-%COMP%]   #mapId[_ngcontent-%COMP%]{filter:invert(.9) hue-rotate(180deg) brightness(.8) contrast(1.2)}body.dark[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{background:var(--ion-color-step-100);color:var(--ion-text-color)}body.dark[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast)}ion-button[slot=end][_ngcontent-%COMP%]{--color: var(--ion-text-color)}body[_ngcontent-%COMP%], ion-card[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{transition:background-color .3s ease,color .3s ease}ion-item[_ngcontent-%COMP%]{--border-radius: 8px;margin-bottom:8px}ion-card[_ngcontent-%COMP%]{margin:10px;box-shadow:0 2px 8px #0000001a}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}ion-card-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.1em;font-weight:600}ion-badge[_ngcontent-%COMP%]{font-size:.8em;font-weight:600}ion-textarea[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;--padding-start: 12px;--padding-end: 12px}ion-button[_ngcontent-%COMP%]{--border-radius: 8px}@media (max-width: 768px){.loading-spinner[_ngcontent-%COMP%]{padding:15px}.loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}ion-card[_ngcontent-%COMP%]{margin:8px}}ion-button[disabled][_ngcontent-%COMP%]{opacity:.6}']});let s=m;return s})();export{Ot as HomeConductorPage};
