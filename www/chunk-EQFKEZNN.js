import{a as i}from"./chunk-GVLJ6NED.js";import{a as l,c as n}from"./chunk-5TEEYVJG.js";import{a as c}from"./chunk-4EMNAG2G.js";import{e as s}from"./chunk-JHI3MBHO.js";var p=l("Preferences",{web:()=>import("./chunk-RAR7SD2F.js").then(o=>new o.PreferencesWeb)});var y=(()=>{let r=class r{setStorage(e,t){return s(this,null,function*(){yield p.set({key:e,value:t})})}login(e){return s(this,null,function*(){try{let t={url:i.url2+"/login",method:"POST",headers:{"Content-Type":"application/json"},data:{email:e.email,password:e.password}},a=yield n.request(t);return a.status===200&&a.data.access_token?(yield this.setStorage("isLoggedIn","true"),yield this.setStorage("userEmail",e.email),yield this.setStorage("token",a.data.access_token),!0):!1}catch(t){return console.error("Error during login:",t),!1}})}register(e){return s(this,null,function*(){try{let t={url:i.url2+"/register",method:"POST",headers:{"Content-Type":"application/json"},data:{name:e.name,email:e.email,password:e.password}},a=yield n.request(t);return a.status===201&&a.data.access_token?(yield this.setStorage("isLoggedIn","true"),localStorage.setItem("userEmail",e.email),localStorage.setItem("token",a.data.access_token),!0):!1}catch(t){return console.error("Error during registration:",t),!1}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();export{y as a};
