import{a as V}from"./chunk-2IABKENT.js";import{a as R}from"./chunk-EP5HSTF2.js";import"./chunk-WKCB6FTJ.js";import{D as v,K as p,L as x,M as C,N as w,O as f,Q as b,R as y,S as I,T as _,U as F,V as S,aa as M,e as a,ga as N,i as g,ia as P,j as h,ja as O,ka as k,l as c,m as o,n,o as l,q as u,sa as A,t as s,ta as E,ua as T,wa as D,xa as G,za as L}from"./chunk-5BTBL3HN.js";import"./chunk-42P5IUVT.js";import"./chunk-XDJGQ7GY.js";import"./chunk-XMO6NZPM.js";import"./chunk-J7VKH6DZ.js";import"./chunk-6F5K652D.js";import"./chunk-SDMJJ4FY.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{g as d}from"./chunk-2R6CW7ES.js";var Y=(()=>{let i=class i{constructor(){this.loadingController=a(G),this.Nav=a(S),this.authService=a(R),this.alertController=a(D),this.Alerts=a(V)}ngOnInit(){this.loginForm=new w({email:new f("",[p.required]),password:new f("",[p.required])})}login(){return d(this,null,function*(){if(this.loginForm.invalid)return this.Alerts.DataVacia();let r=yield this.loadingController.create({message:"Iniciando sesi\xF3n..."});yield r.present();try{let e=this.loginForm.value,t=yield this.authService.login({email:e.email,password:e.password});t.success&&t.user?(console.log("\u{1F389} Login exitoso, rol:",t.user.role),t.user.role==="admin"?this.Nav.navigateRoot("/admin"):t.user.role==="conductor"?this.Nav.navigateRoot("/home-conductor"):this.Nav.navigateRoot("/home"),yield r.dismiss()):yield r.dismiss()}catch(e){console.error("Error during login:",e),yield r.dismiss(),this.Alerts.DataIncorreta()}})}goRegister(){return d(this,null,function*(){yield this.Alerts.Loading(),this.Nav.navigateForward("/register")})}goPrueba(){this.Nav.navigateForward("/home-conductor")}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=h({type:i,selectors:[["app-login"]],decls:21,vars:3,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["src","assets/img/registro.png"],[1,"content"],[1,"seccion",3,"ngSubmit","formGroup"],[1,"info"],["placeholder","Correo","type","email","formControlName","email"],["placeholder","Contrase\xF1a","type","password","formControlName","password"],[1,"buttons"],["shape","round","expand","block",1,"btnInicio",3,"click"],["href",""]],template:function(e,t){e&1&&(l(0,"ion-header",0),o(1,"ion-content",1)(2,"ion-header",2)(3,"ion-toolbar")(4,"ion-title",3),s(5,"login"),n()()(),l(6,"ion-img",4),o(7,"div",5)(8,"ion-text"),s(9,"Inicio de Sesion"),n(),o(10,"form",6),u("ngSubmit",function(){return t.login()}),o(11,"div",7)(12,"ion-item"),l(13,"ion-input",8),n(),o(14,"ion-item"),l(15,"ion-input",9),n()(),o(16,"div",10)(17,"ion-button",11),u("click",function(){return t.login()}),s(18,"Iniciar Sesi\xF3n"),n(),o(19,"a",12),s(20,"\xBFHas olvidado tu Contrase\xF1a"),n()()()()()),e&2&&(c("translucent",!0),g(),c("fullscreen",!0),g(9),c("formGroup",t.loginForm))},dependencies:[A,O,M,k,N,P,E,T,v,_,b,x,C,L,F,y,I],styles:["ion-content[_ngcontent-%COMP%]{--overflow: hidden;--background: url(/assets/img/loginP.png) no-repeat center center / cover}ion-input[_ngcontent-%COMP%]{color:#000;border-radius:10px}ion-button[_ngcontent-%COMP%]{--color:white;width:100%;height:5vh;font-size:20px;--background: rgb(83, 221, 83);display:flex;bottom:6%}ion-item[_ngcontent-%COMP%]{--background: transparent;--border-radius: 10px}ion-text[_ngcontent-%COMP%]{display:flex;margin:0 auto;font-size:25px;font-weight:700;color:#000}ion-img[_ngcontent-%COMP%]{display:flex;margin:0 auto;width:400px;height:400px}.content[_ngcontent-%COMP%]{position:relative;flex-direction:column;margin:0 auto;display:flex;background-color:#ddd6d6;height:50%;width:85%;border-radius:20px;padding:20px}.seccion[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:15px;padding:20px}.buttons[_ngcontent-%COMP%]{width:80%;display:flex;position:absolute;flex-direction:column;align-items:center;gap:10px;bottom:5%}.info[_ngcontent-%COMP%]{margin-top:10%;display:flex;flex-direction:column;gap:70px}"]});let m=i;return m})();export{Y as LoginPage};
